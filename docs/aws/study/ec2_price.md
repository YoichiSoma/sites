# ec2料金について
検証や一時的な利用の場合であれば普通に作成して、必要に応じてインスタンスを終了するか落としておけば料金は発生しない。   
本番稼働や、常時稼働等長期的に稼働する場合は費用を抑えることができる。

---
# 購入プランについて([参考](https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/instance-purchasing-options.html))
AWSでインスタンスを稼働する場合、いくつかの料金プランがある
- On-Demand
- Spot
- reserved
- Savings Plans 

## On-Demand (オンデマンド)
- ec2を起動した場合、この方式の支払いとなる。
- インスタンスステータスが"runnning"の状態のみ料金が発生
- 秒数(最低60秒)から
- 用途として
   - 短期間で不規則なワークロードがあり、中断できない場合に利用
   - 一時的なバッチ処理や使っているタイミングで停止できない検証等

## Spot (スポット)
- ec2起動時にリクエストした場合に適用できる料金
- 例えばt3.medium(2vCPU,MEM 4GiB)だと以下の料金となる
   - オンデマンド : 0.0544 USD
   - スポット     : 0.0163 USD
- 注意点として
  - 余剰リソースを安価で提供しているため、利用したいインスタンスタイプが選択できないことがある
  - キャパシティの都合により停止する可能性がある
  - 料金は固定ではない
     - 最高でもオンデマンドよりは安いが、割引率は状況に応じて変化するとのこと
- 用途として
  - 短期間で処理が終わるワークロード(例えば数秒で終わる処理)
  - 途中で止まっても再開すれば処理が続けられるワークロード
  - 台数が多く、ある程度費用を抑えたい場合で上記条件でワークロードが継続可能であれば有用
  - **通常時の提案としてはあまり利用しないこと!**

## reserved (リザーブド、以下RI)
- よく見積もりに利用されるディスカウントプラン
- 割引率は固定であるため、算出もしやすい
- 例えばt3.medium(2vCPU,MEM 4GiB)を3年間利用前提だと以下の料金となる
  - オンデマンド              : 0.0544 USD
  - RI(スタンダート) 3年前払い : 0.020 USD (62% OFF ) 前払いして 538 USD
- RIにはいくつかプランが有るため次項にて説明する
### RIの種類
2つのパターンがあるのでそれぞれの比較表を作成

|項目|リージョンRI|ゾーンRI|
|---|---|---|
|キャパシティ(※1)予約|されない|される|
|AZの柔軟性|リージョン内 適用|指定したAZ内 適用|

- (※1) キャパシティ
  - インスタンスが必ず起動できるかできないかどうか、予約されていないと利用したいときに起動できない可能性がある
- AZの柔軟性
  - 複数のAZでインスタンスが稼働している場合、それぞれのAZで台数が可変な場合はリージョンRIの検討余地がある
  - 逆に単一AZや、複数のAZでそれぞれの台数が固定の場合はゾーンRIでの検討余地がある


